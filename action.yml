name: 'DigitalOcean App Deployment Action'
description: 'GitHub Action for Creating an App Deployment via DigitalOcean API.'
author: 'rdarida'

branding:
  icon: 'upload'
  color: 'gray-dark'

inputs:
  digitaloceanToken:
    description: 'Read and write token for DigitalOcean API'
    required: true

  digitaloceanAppId:
    description: 'ID of the DigitalOcean App'
    required: true

runs:
  using: 'composite'
  steps:
    - run: >-
        curl
        -s
        -X POST
        -H "Content-Type: application/json"
        -H "Authorization: Bearer ${{ inputs.digitaloceanToken }}"
        "https://api.digitalocean.com/v2/apps/${{ inputs.digitaloceanAppId }}/deployments"
      shell: bash
